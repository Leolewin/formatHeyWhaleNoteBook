(()=>{!function(){const o=()=>{const e=document.querySelector(".notebook__content"),o=[...document.querySelectorAll(".cell__editor-wrapper")];GM_log(o.length),t(0,o,e)},t=(e,o,n)=>{if(e>=o.length)return n.scrollTop=0,void document.querySelector("ul.notebook__actions").childNodes[0].click();const c=o[e];c.scrollIntoView(),c.click(),n.scrollTop=n.scrollTop-20,GM_log("scroll to:",c,e),setTimeout((()=>{c.parentNode.parentNode.querySelector(".cell__toolbar").childNodes[2].click()}),0),setTimeout((()=>{t(e+1,o,n)}),500)};setTimeout((()=>{(()=>{unsafeWindow.window.$pangu=pangu;const e=document.querySelector(".ivu-btn-ghost"),t=e.cloneNode(!0);t.querySelector(".output-menu__btn-text").innerText="format",e.parentNode.prepend(t),t.querySelector(".iconfont").remove(),t.setAttribute("style","background-color: #0969da !important; color: white"),t.onclick=o})(),e()}),5e3)}();const e=()=>{let e=!1;const o=unsafeWindow.window.XMLHttpRequest.prototype.open,t=unsafeWindow.window.XMLHttpRequest.prototype.send;unsafeWindow.window.XMLHttpRequest.prototype.open=function(t,n,...c){GM_log(t,n),e="PUT"===t&&/(\/api\/notebooks\/).*/.test(n),o.apply(this,arguments)},unsafeWindow.window.XMLHttpRequest.prototype.send=function(n){try{const o=JSON.parse(n);o&&o?.Content?.cells&&e&&(o.Content.cells=o.Content.cells.map(((e,o)=>("markdown"===e.cell_type&&(e.source=pangu.spacing(e.source),e.source=e.source.replace(/(\*\*)\s(.*?)\s(\*\*)/g,"$1$2$3").replace(/(\*)\s(.*?)\s(\*)/g,"$1$2$3"),e.source.match(/\[.*\]\((https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?\)/gi).every((o=>(e.source.replaceAll(o,o.replaceAll(/\s+/g,"")),!0)))),"code"===e.cell_type&&(e.source=e.source.replace(/(\n)$/,"")),e))),GM_log("updateData",o),n=JSON.stringify(o),e=!1)}catch(e){}t.apply(this,[n]),unsafeWindow.window.XMLHttpRequest.prototype.open=o,unsafeWindow.window.XMLHttpRequest.prototype.send=t}}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGV5d2hhbGUuZm9ybWF0LmpzIiwibWFwcGluZ3MiOiJPQUVBLFdBQ0UsTUFXTUEsRUFBYSxLQUNmLE1BQU1DLEVBQVVDLFNBQVNDLGNBQWMsc0JBQ2pDQyxFQUFtQixJQUFJRixTQUFTRyxpQkFBaUIsMEJBQ3ZEQyxPQUFPRixFQUFpQkcsUUFDeEJDLEVBQVcsRUFBR0osRUFBa0JILEVBQVEsRUFHdENPLEVBQWEsQ0FBQ0MsRUFBS0MsRUFBT1QsS0FDNUIsR0FBSVEsR0FBT0MsRUFBTUgsT0FHZixPQUZBTixFQUFRVSxVQUFZLE9BQ3BCVCxTQUFTQyxjQUFjLHdCQUF3QlMsV0FBVyxHQUFHQyxRQUcvRCxNQUFNQyxFQUFRSixFQUFNRCxHQUNwQkssRUFBTUMsaUJBQ05ELEVBQU1ELFFBQ05aLEVBQVFVLFVBQVlWLEVBQVFVLFVBQVksR0FDeENMLE9BQU8sYUFBY1EsRUFBT0wsR0FFNUJPLFlBQVcsS0FFUEYsRUFBTUcsV0FBV0EsV0FBV2QsY0FBYyxrQkFBa0JTLFdBQVcsR0FBR0MsT0FBTyxHQUNsRixHQUVIRyxZQUFXLEtBQ1BSLEVBQVdDLEVBQU0sRUFBR0MsRUFBT1QsRUFBUSxHQUNwQyxJQUFHLEVBR1ZlLFlBQVcsS0F4Q2dCLE1BQ3ZCRSxhQUFhQyxPQUFPQyxPQUFTQyxNQUM3QixNQUFNQyxFQUFZcEIsU0FBU0MsY0FBYyxrQkFDbkNvQixFQUFhRCxFQUFVRSxXQUFVLEdBQ3ZDRCxFQUFXcEIsY0FBYywwQkFBMEJzQixVQUFZLFNBQy9ESCxFQUFVTCxXQUFXUyxRQUFRSCxHQUM3QkEsRUFBV3BCLGNBQWMsYUFBYXdCLFNBQ3RDSixFQUFXSyxhQUFjLFFBQVMsc0RBQ2xDTCxFQUFXTSxRQUFVN0IsQ0FBVSxFQWlDL0I4QixHQUNBQyxHQUFhLEdBQ2QsSUFFSixDQTlDRCxHQWdEQSxNQUFNQSxFQUFjLEtBQ2xCLElBQUlDLEdBQWUsRUFDbkIsTUFBTUMsRUFBYWYsYUFBYUMsT0FBT2UsZUFBZUMsVUFBVUMsS0FDMURDLEVBQWFuQixhQUFhQyxPQUFPZSxlQUFlQyxVQUFVRyxLQUNoRXBCLGFBQWFDLE9BQU9lLGVBQWVDLFVBQVVDLEtBQU8sU0FBVUcsRUFBUUMsS0FBUUMsR0FDNUVuQyxPQUFPaUMsRUFBUUMsR0FDZlIsRUFBMEIsUUFBWE8sR0FBb0IseUJBQXlCRyxLQUFLRixHQUNqRVAsRUFBV1UsTUFBTUMsS0FBTUMsVUFDekIsRUFFQTNCLGFBQWFDLE9BQU9lLGVBQWVDLFVBQVVHLEtBQU8sU0FBVVEsR0FDNUQsSUFDRSxNQUFNQyxFQUFhQyxLQUFLQyxNQUFNSCxHQUMxQkMsR0FBY0EsR0FBWUcsU0FBU0MsT0FBU25CLElBRzlDZSxFQUFXRyxRQUFRQyxNQUFRSixFQUFXRyxRQUFRQyxNQUFNQyxLQUFJLENBQUNDLEVBQU01QyxLQUN0QyxhQUFuQjRDLEVBQUtDLFlBQ1BELEVBQUtFLE9BQVNsQyxNQUFNbUMsUUFBUUgsRUFBS0UsUUFDakNGLEVBQUtFLE9BQVNGLEVBQUtFLE9BQU9FLFFBQVEseUJBQTBCLFVBQVVBLFFBQVEscUJBQXNCLFVBQ3BHSixFQUFLRSxPQUFPRyxNQUFNLG1HQUNmQyxPQUFNbkIsSUFDTGEsRUFBS0UsT0FBT0ssV0FBV3BCLEVBQUtBLEVBQUlvQixXQUFXLE9BQVEsTUFDNUMsTUFHVSxTQUFuQlAsRUFBS0MsWUFDUEQsRUFBS0UsT0FBU0YsRUFBS0UsT0FBT0UsUUFBUSxRQUFTLEtBRXRDSixLQUdUL0MsT0FBTyxhQUFjeUMsR0FDckJELEVBQU9FLEtBQUthLFVBQVVkLEdBQ3RCZixHQUFlLEVBR04sQ0FBYixNQUFPOEIsR0FBTSxDQUNiekIsRUFBV00sTUFBTUMsS0FBTSxDQUFDRSxJQUd4QjVCLGFBQWFDLE9BQU9lLGVBQWVDLFVBQVVDLEtBQU9ILEVBQ3BEZixhQUFhQyxPQUFPZSxlQUFlQyxVQUFVRyxLQUFPRCxDQUN0RCxDQUFDLEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mb3JtYXRoZXl3aGFsZW5vdGVib29rLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGltcG9ydCBwYW5ndSBmcm9tICdwYW5ndSc7XHJcblxyXG4oZnVuY3Rpb24oKSB7XHJcbiAgY29uc3QgY3JlYXRlRm9ybWF0QnV0dG9uID0gKCkgPT4ge1xyXG4gICAgICB1bnNhZmVXaW5kb3cud2luZG93LiRwYW5ndSA9IHBhbmd1O1xyXG4gICAgICBjb25zdCBnaG9zdE5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaXZ1LWJ0bi1naG9zdCcpO1xyXG4gICAgICBjb25zdCBmb3JtYXROb2RlID0gZ2hvc3ROb2RlLmNsb25lTm9kZSh0cnVlKTtcclxuICAgICAgZm9ybWF0Tm9kZS5xdWVyeVNlbGVjdG9yKCcub3V0cHV0LW1lbnVfX2J0bi10ZXh0JykuaW5uZXJUZXh0ID0gXCJmb3JtYXRcIjtcclxuICAgICAgZ2hvc3ROb2RlLnBhcmVudE5vZGUucHJlcGVuZChmb3JtYXROb2RlKTtcclxuICAgICAgZm9ybWF0Tm9kZS5xdWVyeVNlbGVjdG9yKCcuaWNvbmZvbnQnKS5yZW1vdmUoKTtcclxuICAgICAgZm9ybWF0Tm9kZS5zZXRBdHRyaWJ1dGUoICdzdHlsZScsICdiYWNrZ3JvdW5kLWNvbG9yOiAjMDk2OWRhICFpbXBvcnRhbnQ7IGNvbG9yOiB3aGl0ZScpO1xyXG4gICAgICBmb3JtYXROb2RlLm9uY2xpY2sgPSBmb3JtYXRQYWdlO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGZvcm1hdFBhZ2UgPSAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubm90ZWJvb2tfX2NvbnRlbnQnKTtcclxuICAgICAgY29uc3QgcHl0aG9uQ29kZWNoaWxkcyA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2VsbF9fZWRpdG9yLXdyYXBwZXInKV07XHJcbiAgICAgIEdNX2xvZyhweXRob25Db2RlY2hpbGRzLmxlbmd0aCk7XHJcbiAgICAgIGZvcm1hdENvZGUoMCwgcHl0aG9uQ29kZWNoaWxkcywgY29udGVudCk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBmb3JtYXRDb2RlID0gKGlkeCwgaXRlbXMsIGNvbnRlbnQpID0+IHtcclxuICAgICAgaWYgKGlkeCA+PSBpdGVtcy5sZW5ndGgpIHtcclxuICAgICAgICBjb250ZW50LnNjcm9sbFRvcCA9IDA7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndWwubm90ZWJvb2tfX2FjdGlvbnMnKS5jaGlsZE5vZGVzWzBdLmNsaWNrKCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IGNoaWxkID0gaXRlbXNbaWR4XTtcclxuICAgICAgY2hpbGQuc2Nyb2xsSW50b1ZpZXcoKTtcclxuICAgICAgY2hpbGQuY2xpY2soKTtcclxuICAgICAgY29udGVudC5zY3JvbGxUb3AgPSBjb250ZW50LnNjcm9sbFRvcCAtIDIwO1xyXG4gICAgICBHTV9sb2coJ3Njcm9sbCB0bzonLCBjaGlsZCwgaWR4KTtcclxuXHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgLy8gZm9ybWF0IHRoZSBweXRob24gY29kZSBieSBjbGljayB0aGUgcGFnZSBwcmV0dHkgYnV0dG9uXHJcbiAgICAgICAgICBjaGlsZC5wYXJlbnROb2RlLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignLmNlbGxfX3Rvb2xiYXInKS5jaGlsZE5vZGVzWzJdLmNsaWNrKCk7XHJcbiAgICAgIH0sIDApXHJcblxyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgIGZvcm1hdENvZGUoaWR4ICsgMSwgaXRlbXMsIGNvbnRlbnQpO1xyXG4gICAgICB9LCA1MDApXHJcbiAgfVxyXG5cclxuICBzZXRUaW1lb3V0KCgpID0+e1xyXG4gICAgICBjcmVhdGVGb3JtYXRCdXR0b24oKTtcclxuICAgICAgZm9ybWF0QnlTYXYoKTtcclxuICB9LCA1MDAwKVxyXG4gIC8vIFlvdXIgY29kZSBoZXJlLi4uXHJcbn0pKCk7XHJcblxyXG5jb25zdCBmb3JtYXRCeVNhdiA9ICgpID0+IHtcclxuICBsZXQgc2hvdWxkRm9ybWF0ID0gZmFsc2U7XHJcbiAgY29uc3Qgb3JpZ2luT3BlbiA9IHVuc2FmZVdpbmRvdy53aW5kb3cuWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLm9wZW47XHJcbiAgY29uc3Qgb3JpZ2luU2VuZCA9IHVuc2FmZVdpbmRvdy53aW5kb3cuWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLnNlbmQ7XHJcbiAgdW5zYWZlV2luZG93LndpbmRvdy5YTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUub3BlbiA9IGZ1bmN0aW9uIChtZXRob2QsIHVybCwgLi4uYXJncykge1xyXG4gICAgR01fbG9nKG1ldGhvZCwgdXJsKVxyXG4gICAgc2hvdWxkRm9ybWF0ID0gbWV0aG9kID09PSAnUFVUJyAmJiAvKFxcL2FwaVxcL25vdGVib29rc1xcLykuKi8udGVzdCh1cmwpO1xyXG4gICAgb3JpZ2luT3Blbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gIH07XHJcbiAgXHJcbiAgdW5zYWZlV2luZG93LndpbmRvdy5YTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB1cGRhdGVEYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcclxuICAgICAgaWYgKHVwZGF0ZURhdGEgJiYgdXBkYXRlRGF0YT8uQ29udGVudD8uY2VsbHMgJiYgc2hvdWxkRm9ybWF0KVxyXG4gICAgICB7XHJcbiAgICAgICBcclxuICAgICAgICB1cGRhdGVEYXRhLkNvbnRlbnQuY2VsbHMgPSB1cGRhdGVEYXRhLkNvbnRlbnQuY2VsbHMubWFwKChjZWxsLCBpZHgpID0+IHtcclxuICAgICAgICAgIGlmIChjZWxsLmNlbGxfdHlwZSA9PT0gJ21hcmtkb3duJykge1xyXG4gICAgICAgICAgICBjZWxsLnNvdXJjZSA9IHBhbmd1LnNwYWNpbmcoY2VsbC5zb3VyY2UpO1xyXG4gICAgICAgICAgICBjZWxsLnNvdXJjZSA9IGNlbGwuc291cmNlLnJlcGxhY2UoLyhcXCpcXCopXFxzKC4qPylcXHMoXFwqXFwqKS9nLCAnJDEkMiQzJykucmVwbGFjZSgvKFxcKilcXHMoLio/KVxccyhcXCopL2csICckMSQyJDMnKTtcclxuICAgICAgICAgICAgY2VsbC5zb3VyY2UubWF0Y2goL1xcWy4qXFxdXFwoKGh0dHBzPzpcXC9cXC8oKFthLXpBLVowLTldKy0/KStbYS16QS1aMC05XStcXC4pK1thLXpBLVpdKykoOlxcZCspPyhcXC8uKik/KFxcPy4qKT8oIy4qKT9cXCkvaWcpXHJcbiAgICAgICAgICAgICAgLmV2ZXJ5KHVybCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjZWxsLnNvdXJjZS5yZXBsYWNlQWxsKHVybCwgdXJsLnJlcGxhY2VBbGwoL1xccysvZywgJycpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKGNlbGwuY2VsbF90eXBlID09PSAnY29kZScpIHtcclxuICAgICAgICAgICAgY2VsbC5zb3VyY2UgPSBjZWxsLnNvdXJjZS5yZXBsYWNlKC8oXFxuKSQvLCAnJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gY2VsbDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgR01fbG9nKCd1cGRhdGVEYXRhJywgdXBkYXRlRGF0YSlcclxuICAgICAgICBkYXRhID0gSlNPTi5zdHJpbmdpZnkodXBkYXRlRGF0YSk7XHJcbiAgICAgICAgc2hvdWxkRm9ybWF0ID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNhdGNoIChlcnIpIHt9XHJcbiAgICBvcmlnaW5TZW5kLmFwcGx5KHRoaXMsIFtkYXRhXSk7XHJcblxyXG4gICAgLy9yZXNldCBYTUxIdHRwUmVxdWVzdFxyXG4gICAgdW5zYWZlV2luZG93LndpbmRvdy5YTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUub3BlbiA9IG9yaWdpbk9wZW47XHJcbiAgICB1bnNhZmVXaW5kb3cud2luZG93LlhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZS5zZW5kID0gb3JpZ2luU2VuZDtcclxuICB9O1xyXG59Il0sIm5hbWVzIjpbImZvcm1hdFBhZ2UiLCJjb250ZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicHl0aG9uQ29kZWNoaWxkcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJHTV9sb2ciLCJsZW5ndGgiLCJmb3JtYXRDb2RlIiwiaWR4IiwiaXRlbXMiLCJzY3JvbGxUb3AiLCJjaGlsZE5vZGVzIiwiY2xpY2siLCJjaGlsZCIsInNjcm9sbEludG9WaWV3Iiwic2V0VGltZW91dCIsInBhcmVudE5vZGUiLCJ1bnNhZmVXaW5kb3ciLCJ3aW5kb3ciLCIkcGFuZ3UiLCJwYW5ndSIsImdob3N0Tm9kZSIsImZvcm1hdE5vZGUiLCJjbG9uZU5vZGUiLCJpbm5lclRleHQiLCJwcmVwZW5kIiwicmVtb3ZlIiwic2V0QXR0cmlidXRlIiwib25jbGljayIsImNyZWF0ZUZvcm1hdEJ1dHRvbiIsImZvcm1hdEJ5U2F2Iiwic2hvdWxkRm9ybWF0Iiwib3JpZ2luT3BlbiIsIlhNTEh0dHBSZXF1ZXN0IiwicHJvdG90eXBlIiwib3BlbiIsIm9yaWdpblNlbmQiLCJzZW5kIiwibWV0aG9kIiwidXJsIiwiYXJncyIsInRlc3QiLCJhcHBseSIsInRoaXMiLCJhcmd1bWVudHMiLCJkYXRhIiwidXBkYXRlRGF0YSIsIkpTT04iLCJwYXJzZSIsIkNvbnRlbnQiLCJjZWxscyIsIm1hcCIsImNlbGwiLCJjZWxsX3R5cGUiLCJzb3VyY2UiLCJzcGFjaW5nIiwicmVwbGFjZSIsIm1hdGNoIiwiZXZlcnkiLCJyZXBsYWNlQWxsIiwic3RyaW5naWZ5IiwiZXJyIl0sInNvdXJjZVJvb3QiOiIifQ==