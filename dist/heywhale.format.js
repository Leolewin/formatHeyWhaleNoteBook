(()=>{!function(){const o=()=>{const e=document.querySelector(".notebook__content"),o=[...document.querySelectorAll(".cell__editor-wrapper")];GM_log(o.length),t(0,o,e)},t=(e,o,n)=>{if(e>=o.length)return n.scrollTop=0,void document.querySelector("ul.notebook__actions").childNodes[0].click();const c=o[e];c.scrollIntoView(),c.click(),n.scrollTop=n.scrollTop-20,GM_log("scroll to:",c,e),setTimeout((()=>{c.parentNode.parentNode.querySelector(".cell__toolbar").childNodes[2].click()}),0),setTimeout((()=>{t(e+1,o,n)}),500)};setTimeout((async()=>{(()=>{unsafeWindow.window.$pangu=pangu;const e=document.querySelector(".ivu-btn-ghost"),t=e.cloneNode(!0);t.querySelector(".output-menu__btn-text").innerText="format",e.parentNode.prepend(t),t.querySelector(".iconfont").remove(),t.setAttribute("style","background-color: #0969da !important; color: white"),t.onclick=o})(),e()}),5e3)}();const e=()=>{let e=!1;const o=unsafeWindow.window.XMLHttpRequest.prototype.open,t=unsafeWindow.window.XMLHttpRequest.prototype.send;unsafeWindow.window.XMLHttpRequest.prototype.open=function(t,n,...c){GM_log(t,n),e="PUT"===t&&/(\/api\/notebooks\/).*/.test(n),o.apply(this,arguments)},unsafeWindow.window.XMLHttpRequest.prototype.send=function(o){try{const t=JSON.parse(o);t&&t?.Content?.cells&&e&&(t.Content.cells=t.Content.cells.map(((e,o)=>("markdown"===e.cell_type?e.source=pangu.spacing(e.source):"code"===e.cell_type&&(e.source=e.source.replace(/.*(\n)$/,"")),e))),GM_log("updateData",t),e=!1,o=JSON.stringify(t))}catch(e){}t.apply(this,[o]),setTimeout((()=>{location.reload()}),2e3)}}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGV5d2hhbGUuZm9ybWF0LmpzIiwibWFwcGluZ3MiOiJPQUVBLFdBQ0UsTUFXTUEsRUFBYSxLQUNmLE1BQU1DLEVBQVVDLFNBQVNDLGNBQWMsc0JBQ2pDQyxFQUFtQixJQUFJRixTQUFTRyxpQkFBaUIsMEJBQ3ZEQyxPQUFPRixFQUFpQkcsUUFFeEJDLEVBQVcsRUFBR0osRUFBa0JILEVBQVEsRUFJdENPLEVBQWEsQ0FBQ0MsRUFBS0MsRUFBT1QsS0FDNUIsR0FBSVEsR0FBT0MsRUFBTUgsT0FHZixPQUZBTixFQUFRVSxVQUFZLE9BQ3BCVCxTQUFTQyxjQUFjLHdCQUF3QlMsV0FBVyxHQUFHQyxRQUcvRCxNQUFNQyxFQUFRSixFQUFNRCxHQUNwQkssRUFBTUMsaUJBQ05ELEVBQU1ELFFBQ05aLEVBQVFVLFVBQVlWLEVBQVFVLFVBQVksR0FDeENMLE9BQU8sYUFBY1EsRUFBT0wsR0FFNUJPLFlBQVcsS0FFUEYsRUFBTUcsV0FBV0EsV0FBV2QsY0FBYyxrQkFBa0JTLFdBQVcsR0FBR0MsT0FBTyxHQUNsRixHQUVIRyxZQUFXLEtBQ1BSLEVBQVdDLEVBQU0sRUFBR0MsRUFBT1QsRUFBUSxHQUNwQyxJQUFHLEVBR1ZlLFlBQVdFLFVBMUNnQixNQUN2QkMsYUFBYUMsT0FBT0MsT0FBU0MsTUFDN0IsTUFBTUMsRUFBWXJCLFNBQVNDLGNBQWMsa0JBQ25DcUIsRUFBYUQsRUFBVUUsV0FBVSxHQUN2Q0QsRUFBV3JCLGNBQWMsMEJBQTBCdUIsVUFBWSxTQUMvREgsRUFBVU4sV0FBV1UsUUFBUUgsR0FDN0JBLEVBQVdyQixjQUFjLGFBQWF5QixTQUN0Q0osRUFBV0ssYUFBYyxRQUFTLHNEQUNsQ0wsRUFBV00sUUFBVTlCLENBQVUsRUFvQy9CK0IsR0FDQUMsR0FBYSxHQUVkLElBRUosQ0FsREQsR0FvREEsTUFBTUEsRUFBYyxLQUNsQixJQUFJQyxHQUFlLEVBQ25CLE1BQU1DLEVBQWFmLGFBQWFDLE9BQU9lLGVBQWVDLFVBQVVDLEtBQzFEQyxFQUFhbkIsYUFBYUMsT0FBT2UsZUFBZUMsVUFBVUcsS0FDaEVwQixhQUFhQyxPQUFPZSxlQUFlQyxVQUFVQyxLQUFPLFNBQVVHLEVBQVFDLEtBQVFDLEdBQzVFcEMsT0FBT2tDLEVBQVFDLEdBQ2ZSLEVBQTBCLFFBQVhPLEdBQW9CLHlCQUF5QkcsS0FBS0YsR0FDakVQLEVBQVdVLE1BQU1DLEtBQU1DLFVBQ3pCLEVBRUEzQixhQUFhQyxPQUFPZSxlQUFlQyxVQUFVRyxLQUFPLFNBQVVRLEdBQzVELElBQ0UsTUFBTUMsRUFBYUMsS0FBS0MsTUFBTUgsR0FDMUJDLEdBQWNBLEdBQVlHLFNBQVNDLE9BQVNuQixJQUc5Q2UsRUFBV0csUUFBUUMsTUFBUUosRUFBV0csUUFBUUMsTUFBTUMsS0FBSSxDQUFDQyxFQUFNN0MsS0FDdEMsYUFBbkI2QyxFQUFLQyxVQUNQRCxFQUFLRSxPQUFTbEMsTUFBTW1DLFFBQVFILEVBQUtFLFFBRVAsU0FBbkJGLEVBQUtDLFlBQ1pELEVBQUtFLE9BQVNGLEVBQUtFLE9BQU9FLFFBQVEsVUFBVyxLQUV4Q0osS0FHVGhELE9BQU8sYUFBYzBDLEdBQ3JCZixHQUFlLEVBQ2ZjLEVBQU9FLEtBQUtVLFVBQVVYLEdBR2IsQ0FBYixNQUFPWSxHQUFNLENBQ2J0QixFQUFXTSxNQUFNQyxLQUFNLENBQUNFLElBQ3hCL0IsWUFBVyxLQUNUNkMsU0FBU0MsUUFBUSxHQUNoQixJQUNMLENBQUMsQyIsInNvdXJjZXMiOlsid2VicGFjazovL2Zvcm1hdGhleXdoYWxlbm90ZWJvb2svLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gaW1wb3J0IHBhbmd1IGZyb20gJ3Bhbmd1JztcclxuXHJcbihmdW5jdGlvbigpIHtcclxuICBjb25zdCBjcmVhdGVGb3JtYXRCdXR0b24gPSAoKSA9PiB7XHJcbiAgICAgIHVuc2FmZVdpbmRvdy53aW5kb3cuJHBhbmd1ID0gcGFuZ3U7XHJcbiAgICAgIGNvbnN0IGdob3N0Tm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pdnUtYnRuLWdob3N0Jyk7XHJcbiAgICAgIGNvbnN0IGZvcm1hdE5vZGUgPSBnaG9zdE5vZGUuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgICBmb3JtYXROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5vdXRwdXQtbWVudV9fYnRuLXRleHQnKS5pbm5lclRleHQgPSBcImZvcm1hdFwiO1xyXG4gICAgICBnaG9zdE5vZGUucGFyZW50Tm9kZS5wcmVwZW5kKGZvcm1hdE5vZGUpO1xyXG4gICAgICBmb3JtYXROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5pY29uZm9udCcpLnJlbW92ZSgpO1xyXG4gICAgICBmb3JtYXROb2RlLnNldEF0dHJpYnV0ZSggJ3N0eWxlJywgJ2JhY2tncm91bmQtY29sb3I6ICMwOTY5ZGEgIWltcG9ydGFudDsgY29sb3I6IHdoaXRlJyk7XHJcbiAgICAgIGZvcm1hdE5vZGUub25jbGljayA9IGZvcm1hdFBhZ2U7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZm9ybWF0UGFnZSA9ICgpID0+IHtcclxuICAgICAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ub3RlYm9va19fY29udGVudCcpO1xyXG4gICAgICBjb25zdCBweXRob25Db2RlY2hpbGRzID0gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jZWxsX19lZGl0b3Itd3JhcHBlcicpXTtcclxuICAgICAgR01fbG9nKHB5dGhvbkNvZGVjaGlsZHMubGVuZ3RoKTtcclxuXHJcbiAgICAgIGZvcm1hdENvZGUoMCwgcHl0aG9uQ29kZWNoaWxkcywgY29udGVudCk7XHJcblxyXG4gIH1cclxuXHJcbiAgY29uc3QgZm9ybWF0Q29kZSA9IChpZHgsIGl0ZW1zLCBjb250ZW50KSA9PiB7XHJcbiAgICAgIGlmIChpZHggPj0gaXRlbXMubGVuZ3RoKSB7XHJcbiAgICAgICAgY29udGVudC5zY3JvbGxUb3AgPSAwO1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3VsLm5vdGVib29rX19hY3Rpb25zJykuY2hpbGROb2Rlc1swXS5jbGljaygpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBjaGlsZCA9IGl0ZW1zW2lkeF07XHJcbiAgICAgIGNoaWxkLnNjcm9sbEludG9WaWV3KCk7XHJcbiAgICAgIGNoaWxkLmNsaWNrKCk7XHJcbiAgICAgIGNvbnRlbnQuc2Nyb2xsVG9wID0gY29udGVudC5zY3JvbGxUb3AgLSAyMDtcclxuICAgICAgR01fbG9nKCdzY3JvbGwgdG86JywgY2hpbGQsIGlkeCk7XHJcblxyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgIC8vIGZvcm1hdCB0aGUgcHl0aG9uIGNvZGUgYnkgY2xpY2sgdGhlIHBhZ2UgcHJldHR5IGJ1dHRvblxyXG4gICAgICAgICAgY2hpbGQucGFyZW50Tm9kZS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5jZWxsX190b29sYmFyJykuY2hpbGROb2Rlc1syXS5jbGljaygpO1xyXG4gICAgICB9LCAwKVxyXG5cclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICBmb3JtYXRDb2RlKGlkeCArIDEsIGl0ZW1zLCBjb250ZW50KTtcclxuICAgICAgfSwgNTAwKVxyXG4gIH1cclxuXHJcbiAgc2V0VGltZW91dChhc3luYyAoKSA9PntcclxuXHJcbiAgICAgIGNyZWF0ZUZvcm1hdEJ1dHRvbigpO1xyXG4gICAgICBmb3JtYXRCeVNhdigpO1xyXG5cclxuICB9LCA1MDAwKVxyXG4gIC8vIFlvdXIgY29kZSBoZXJlLi4uXHJcbn0pKCk7XHJcblxyXG5jb25zdCBmb3JtYXRCeVNhdiA9ICgpID0+IHtcclxuICBsZXQgc2hvdWxkRm9ybWF0ID0gZmFsc2U7XHJcbiAgY29uc3Qgb3JpZ2luT3BlbiA9IHVuc2FmZVdpbmRvdy53aW5kb3cuWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLm9wZW47XHJcbiAgY29uc3Qgb3JpZ2luU2VuZCA9IHVuc2FmZVdpbmRvdy53aW5kb3cuWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLnNlbmQ7XHJcbiAgdW5zYWZlV2luZG93LndpbmRvdy5YTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUub3BlbiA9IGZ1bmN0aW9uIChtZXRob2QsIHVybCwgLi4uYXJncykge1xyXG4gICAgR01fbG9nKG1ldGhvZCwgdXJsKVxyXG4gICAgc2hvdWxkRm9ybWF0ID0gbWV0aG9kID09PSAnUFVUJyAmJiAvKFxcL2FwaVxcL25vdGVib29rc1xcLykuKi8udGVzdCh1cmwpO1xyXG4gICAgb3JpZ2luT3Blbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gIH07XHJcbiAgXHJcbiAgdW5zYWZlV2luZG93LndpbmRvdy5YTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB1cGRhdGVEYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcclxuICAgICAgaWYgKHVwZGF0ZURhdGEgJiYgdXBkYXRlRGF0YT8uQ29udGVudD8uY2VsbHMgJiYgc2hvdWxkRm9ybWF0KVxyXG4gICAgICB7XHJcbiAgICAgICBcclxuICAgICAgICB1cGRhdGVEYXRhLkNvbnRlbnQuY2VsbHMgPSB1cGRhdGVEYXRhLkNvbnRlbnQuY2VsbHMubWFwKChjZWxsLCBpZHgpID0+IHtcclxuICAgICAgICAgIGlmIChjZWxsLmNlbGxfdHlwZSA9PT0gJ21hcmtkb3duJykge1xyXG4gICAgICAgICAgICBjZWxsLnNvdXJjZSA9IHBhbmd1LnNwYWNpbmcoY2VsbC5zb3VyY2UpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSBpZiAoY2VsbC5jZWxsX3R5cGUgPT09ICdjb2RlJykge1xyXG4gICAgICAgICAgICBjZWxsLnNvdXJjZSA9IGNlbGwuc291cmNlLnJlcGxhY2UoLy4qKFxcbikkLywgJycpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIGNlbGw7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIEdNX2xvZygndXBkYXRlRGF0YScsIHVwZGF0ZURhdGEpXHJcbiAgICAgICAgc2hvdWxkRm9ybWF0ID0gZmFsc2U7XHJcbiAgICAgICAgZGF0YSA9IEpTT04uc3RyaW5naWZ5KHVwZGF0ZURhdGEpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyKSB7fVxyXG4gICAgb3JpZ2luU2VuZC5hcHBseSh0aGlzLCBbZGF0YV0pO1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgfSwgMjAwMCk7XHJcbiAgfTtcclxufSJdLCJuYW1lcyI6WyJmb3JtYXRQYWdlIiwiY29udGVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInB5dGhvbkNvZGVjaGlsZHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiR01fbG9nIiwibGVuZ3RoIiwiZm9ybWF0Q29kZSIsImlkeCIsIml0ZW1zIiwic2Nyb2xsVG9wIiwiY2hpbGROb2RlcyIsImNsaWNrIiwiY2hpbGQiLCJzY3JvbGxJbnRvVmlldyIsInNldFRpbWVvdXQiLCJwYXJlbnROb2RlIiwiYXN5bmMiLCJ1bnNhZmVXaW5kb3ciLCJ3aW5kb3ciLCIkcGFuZ3UiLCJwYW5ndSIsImdob3N0Tm9kZSIsImZvcm1hdE5vZGUiLCJjbG9uZU5vZGUiLCJpbm5lclRleHQiLCJwcmVwZW5kIiwicmVtb3ZlIiwic2V0QXR0cmlidXRlIiwib25jbGljayIsImNyZWF0ZUZvcm1hdEJ1dHRvbiIsImZvcm1hdEJ5U2F2Iiwic2hvdWxkRm9ybWF0Iiwib3JpZ2luT3BlbiIsIlhNTEh0dHBSZXF1ZXN0IiwicHJvdG90eXBlIiwib3BlbiIsIm9yaWdpblNlbmQiLCJzZW5kIiwibWV0aG9kIiwidXJsIiwiYXJncyIsInRlc3QiLCJhcHBseSIsInRoaXMiLCJhcmd1bWVudHMiLCJkYXRhIiwidXBkYXRlRGF0YSIsIkpTT04iLCJwYXJzZSIsIkNvbnRlbnQiLCJjZWxscyIsIm1hcCIsImNlbGwiLCJjZWxsX3R5cGUiLCJzb3VyY2UiLCJzcGFjaW5nIiwicmVwbGFjZSIsInN0cmluZ2lmeSIsImVyciIsImxvY2F0aW9uIiwicmVsb2FkIl0sInNvdXJjZVJvb3QiOiIifQ==